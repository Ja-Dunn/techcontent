<properties 
	pageTitle="基于角色的访问控制故障排除" 
	description="使用不同资源类型进行基于角色的访问控制。" 
	services="azure-portal"
	documentationCenter="na" 
	authors="stepsic-microsoft-com" 
	writer="" 
	manager="terrylan" 
	editor=""/>

<tags 
	ms.service="azure-portal" 
	ms.date="04/25/2015" 
	wacn.date="10/17/2016"/>

# 基于角色的访问控制故障排除

## 介绍

[基于角色的访问控制](/documentation/articles/role-based-access-control-configure/)是强大的功能，允许你委派对 Azure 中的资源的精细访问权限。这意味着你可以确信授予特定人员他们刚好所需的权限。但是，有时 Azure 资源的资源模型可能十分复杂，并且可能难于完全了解要授予对什么的权限。

本文档会让你了解在 Azure 门户中使用一些新角色时的预期步骤。此版本提供了三个预建角色：
* 所有者
* 参与者
* 读者

所有者和参与者对管理体验具有完全访问权限，不同之处在于参与者无法向其他用户或组提供访问权限。具有读者角色事情会变得更加有趣，因此，我们将着重介绍读者角色。有关如何准确地授予访问权限的详细信息，[请参阅本文](/documentation/articles/role-based-access-control-configure/)。

## 应用程序服务的工作负荷

### 仅具有读访问权限 

如果你只向用户或自己授予对单个 Web 应用程序的读取访问权限，则可能会禁用某些功能，这可能不是你所期望的。以下管理功能需要对 Web 应用程序具有**写**访问权限（参与者或所有者），并且在任何只读方案中将不可用。
 
1. 命令（例如启动、停止等。）
2. 更改设置，如常规配置、缩放设置、备份设置和监视设置。
3. 访问发布凭据和其他机密信息（如应用程序设置和连接字符串）。
4. 流式传输日志
5. 诊断日志配置
6. 控制台（命令提示符）
7. 活动和最新部署（适用于本地 Git 连续部署）
8. 估计费用
9. Web 测试
10. 虚拟网络（如果虚拟网络是以前具有写访问权限的用户所配置的，则仅对读者可见）。
 
如果你不能访问以上任何磁贴，则需要对 Web 应用程序具有“参与者”访问权限。

### 处理相关资源
 
由于存在几个相互作用的不同资源，Web 应用程序是复杂的。下面是包含几个网站的典型资源组：

![Web 应用程序资源组](./media/role-based-access-control-troubleshooting/Website-resource-model.png)

因此，如果你只授予某人对网站的访问权限，则网站边栏选项卡上的很多功能将完全禁用。
 
1. 这些项需要访问与网站对应的 **App Service 计划**：  
    * 查看 Web 应用程序的定价层（例如，“免费”或“标准”）。
    * 缩放配置（即，实例数、虚拟机大小、自动缩放设置）。
    * 配额（例如，存储、带宽、CPU）。
2. 这些项需要访问包含你的网站的整个**资源组**：  
    * SSL 证书和绑定（这是因为 SSL 证书可以在同一资源组和地理位置中的站点之间共享）。
    * 警报规则
    * 自动缩放设置
    * Application Insights 组件
    * Web 测试

## 虚拟机工作负荷

与 Web 应用程序很类似，虚拟机边栏选项卡上的某些功能需要对虚拟机或资源组中的其他资源具有写访问权限。

虚拟机具有这些相关资源：
* 域名
* 虚拟网络
* 存储帐户
* 警报规则

1. 以下项需要对虚拟机具有**写**访问权限：  
    * 终结点
    * IP 地址
    * 磁盘
    * 扩展
2. 以下项需要对虚拟机及它所在的**资源组**（以及域名）具有写访问权限：  
    * 可用性集
    * 负载均衡集
    * 警报规则
    
如果你不能访问以上任何磁贴，则需要让管理员为你提供对资源组的“参与者”访问权限。

<!---HONumber=67-->